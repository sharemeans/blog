---
title: base64学习笔记
categories: 其它
tags: [base64]
date: 2021-6-20
---

## 学习背景
webpack打包经常将图片内联进js代码中，内联格式就是base64。image标签本身支持base64格式。base64更像是二进制格式的马甲，由于所有字符都是可见字符，因此可以安全的运行在各个平台上而不会丢失数据。

参考资料：
- http://www.ruanyifeng.com/blog/2008/06/base64.html
- https://www.zhihu.com/question/36306744

## 编码原理

base64，包含64个可见字符：
- 小写字母a-z
- 大写字母A-Z
- 数字0-9
- 符号"+"、"/"
- 再加上作为垫字的"="（实际上是65个字符）

编码步骤：
1. 每三个字节作为一组，一共是24个二进制位。不足3个字节的分组在结尾补0。空出来的全0字节最终编码为`=`
2. 将这24个二进制位分为四组，每个组有6个二进制位
3. 在每组前面加两个00，扩展成32个二进制位，即四个字节
4. 新的二进制串，每个字节对应base64基本字符中的某个字符


### base64 字节值->字符映射表

```
0　A　　17　R　　　34　i　　　51　z

　　1　B　　18　S　　　35　j　　　52　0

　　2　C　　19　T　　　36　k　　　53　1

　　3　D　　20　U　　　37　l　　　54　2

　　4　E　　21　V　　　38　m　　　55　3

　　5　F　　22　W　　　39　n　　　56　4

　　6　G　　23　X　　　40　o　　　57　5

　　7　H　　24　Y　　　41　p　　　58　6

　　8　I　　　25　Z　　　42　q　　　59　7

　　9　J　　26　a　　　43　r　　　60　8

　　10　K　　27　b　　　44　s　　　61　9

　　11　L　　28　c　　　45　t　　　62　+

　　12　M　　29　d　　　46　u　　　63　/

　　13　N　　30　e　　　47　v

　　14　O　　31　f　　　48　w　　　

　　15　P　　32　g　　　49　x

　　16　Q　　33　h　　　50　y
```

## 编码率

24个字符扩展成32个字符，编码后的文本比原文本大三分之一。